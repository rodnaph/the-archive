###############################################################################################
###############################################################################################
##
##  compile_list.pl
##
###############################################################################################
###############################################################################################

use strict;
use DirHandle;
use FileHandle qw( print );

use constant BASE => 'c:/windows/desktop/project/source/builder/';
use constant LIST_FILE => BASE . '../compile.list';

###############################################################################################

my $fh = new FileHandle( LIST_FILE, '>' );

print "\nCreating class list...";
scan_dir( BASE, 'builder/', $fh );
print "done!\n";

$fh->close();

print "Spawning javac:\n\n";
system "javac \@compile.list -deprecation -d c:\\jdk1.2.2\\packages";

###############################################################################################
##
##  scan_dir( dir )
##
###############################################################################################

sub scan_dir {

  my ( $dir, $vdir, $fh ) = @_;

  my $dh = new DirHandle( $dir );

  while ( $dh && (my $file = $dh->read()) ) {
    if ( $file !~ /\./ ) {
      scan_dir( $dir . $file . '/', $vdir . $file . '/', $fh );
    } elsif ( $file !~ /\.$/ && $file =~ /java$/ ) {
      $fh->print( $vdir . $file . "\n" );
    }
  }

}

###############################################################################################
###############################################################################################