<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta name="generator" content="PHPDoctor 2RC2 (http://phpdoctor.sourceforge.net/)">
<meta name="when" content="Wed, 18 Apr 2007 22:57:57 +0900">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>Smutty_Database (Smutty)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>Smutty</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../smutty/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../smutty/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../smutty/smutty_database.html" target="_top">No frames</a>
</div>
<div class="small_links">
View: <a href="/code/viewClass/Smutty_Database">Source Code</a>
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">Smutty.Smutty_Database</div>

<h1>Class Smutty_Database</h1>

<pre class="tree"><a href="../smutty/smutty_object.html">Smutty_Object</a><br>  |<br>  +--<strong>Smutty_Database</strong><br /></pre>

<hr>

<p class="signature">public abstract  class <strong>Smutty_Database</strong><br>extends <a href="../smutty/smutty_object.html">Smutty_Object</a>

</p>

<div class="comment" id="overview_description"><p>
 this is the base class which all database implementations need
 to extend and implement.  it controls access to these implementations
 however and getting a db handle should be done by using the
 </p><p><code>getInstance()</code></p><p> method.</p><p>/</p></div>

<hr>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type">protected abstract  boolean</td>
<td class="description"><p class="name"><a href="#connect()">connect</a>()</p><p class="description">
 connects to the database. </p></td>
</tr>
<tr>
<td class="type">abstract  String</td>
<td class="description"><p class="name"><a href="#escape()">escape</a>(String string)</p><p class="description">
 takes a string and escapes any characters in it that need
 to be for the current database
</p></td>
</tr>
<tr>
<td class="type">abstract  String</td>
<td class="description"><p class="name"><a href="#getCurrentDate()">getCurrentDate</a>()</p><p class="description">
 returns the current date/time, formatted properly for the
 current database
</p></td>
</tr>
<tr>
<td class="type">abstract  String</td>
<td class="description"><p class="name"><a href="#getDateFormat()">getDateFormat</a>()</p><p class="description">
 returns the date format for this db. </p></td>
</tr>
<tr>
<td class="type">abstract  String</td>
<td class="description"><p class="name"><a href="#getError()">getError</a>()</p><p class="description">
 returns the last error to occur
</p></td>
</tr>
<tr>
<td class="type">abstract  String</td>
<td class="description"><p class="name"><a href="#getFieldsSql()">getFieldsSql</a>(String table)</p><p class="description">
 returns the sql used to eatract field information the resultset should have the fields:
   - name (field name)
   - type (field type)
   - nullable (yes/no string)
</p></td>
</tr>
<tr>
<td class="type">abstract  int</td>
<td class="description"><p class="name"><a href="#getInsertId()">getInsertId</a>(String table)</p><p class="description">
 returns the auto generated id for the last record inserted.
</p></td>
</tr>
<tr>
<td class="type">static  <a href="../smutty/smutty_database.html">Smutty_Database</a></td>
<td class="description"><p class="name"><a href="#getInstance()">getInstance</a>()</p><p class="description">
 method for getting a handle to the current database
 connection. </p></td>
</tr>
<tr>
<td class="type">abstract  <a href="../smutty/smutty_database_result.html">Smutty_Database_Result</a></td>
<td class="description"><p class="name"><a href="#query()">query</a>(String sql)</p><p class="description">
 executes a query on the database. </p></td>
</tr>
<tr>
<td class="type">abstract  boolean</td>
<td class="description"><p class="name"><a href="#script()">script</a>(String file)</p><p class="description">
 run an sql script against the database. </p></td>
</tr>
<tr>
<td class="type">abstract  boolean</td>
<td class="description"><p class="name"><a href="#update()">update</a>(String sql)</p><p class="description">
 executes an sql statement on the database and returns a
 boolean indicating if it went well or not
</p></td>
</tr>
</table>

<h2 id="detail_method">Method Detail</h2>
<h3 id="connect()">connect</h3>
<code class="signature">protected abstract  boolean <strong>connect</strong>()</code>
<div class="details">
<p>
 connects to the database.  db config information could be
 db independent so this method must read this info from
 the Smutty_Config class itself.
</p><dl>
<dt>Returns:</dt>
<dd>indicating success</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#connect">Go to code</a><hr>

<h3 id="escape()">escape</h3>
<code class="signature">public abstract  String <strong>escape</strong>(String string)</code>
<div class="details">
<p>
 takes a string and escapes any characters in it that need
 to be for the current database
</p><dl>
<dt>Parameters:</dt>
<dd>string - the string to escape</dd>
<dt>Returns:</dt>
<dd>escaped string</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#escape">Go to code</a><hr>

<h3 id="getCurrentDate()">getCurrentDate</h3>
<code class="signature">public abstract  String <strong>getCurrentDate</strong>()</code>
<div class="details">
<p>
 returns the current date/time, formatted properly for the
 current database
</p><dl>
<dt>Returns:</dt>
<dd>current datetime string</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getCurrentDate">Go to code</a><hr>

<h3 id="getDateFormat()">getDateFormat</h3>
<code class="signature">public abstract  String <strong>getDateFormat</strong>()</code>
<div class="details">
<p>
 returns the date format for this db.  the format should
 be ready for the date() function to use
</p><dl>
<dt>Returns:</dt>
<dd>date format string</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getDateFormat">Go to code</a><hr>

<h3 id="getError()">getError</h3>
<code class="signature">public abstract  String <strong>getError</strong>()</code>
<div class="details">
<p>
 returns the last error to occur
</p><dl>
<dt>Returns:</dt>
<dd>desc of last error</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getError">Go to code</a><hr>

<h3 id="getFieldsSql()">getFieldsSql</h3>
<code class="signature">public abstract  String <strong>getFieldsSql</strong>(String table)</code>
<div class="details">
<p>
 returns the sql used to eatract field information</p><p> the resultset should have the fields:
   - name (field name)
   - type (field type)
   - nullable (yes/no string)
</p><dl>
<dt>Parameters:</dt>
<dd>table - the table to get fields for</dd>
<dt>Returns:</dt>
<dd>sql string</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getFieldsSql">Go to code</a><hr>

<h3 id="getInsertId()">getInsertId</h3>
<code class="signature">public abstract  int <strong>getInsertId</strong>(String table)</code>
<div class="details">
<p>
 returns the auto generated id for the last record inserted.
 for compat you need to specify the table the record was
 inserted for (though this is not used for some dbs)
</p><dl>
<dt>Parameters:</dt>
<dd>table - table record was inserted into</dd>
<dt>Returns:</dt>
<dd>the inserted id</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getInsertId">Go to code</a><hr>

<h3 id="getInstance()">getInstance</h3>
<code class="signature">public static  <a href="../smutty/smutty_database.html">Smutty_Database</a> <strong>getInstance</strong>()</code>
<div class="details">
<p>
 method for getting a handle to the current database
 connection.  of none has been created then this will
 try and read the config to find out what and how to create.
</p><dl>
<dt>Returns:</dt>
<dd>the singleton</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#getInstance">Go to code</a><hr>

<h3 id="query()">query</h3>
<code class="signature">public abstract  <a href="../smutty/smutty_database_result.html">Smutty_Database_Result</a> <strong>query</strong>(String sql)</code>
<div class="details">
<p>
 executes a query on the database.  it should return an
 class which extends the Smutty_Database_Result class
</p><dl>
<dt>Parameters:</dt>
<dd>sql - the query to execute</dd>
<dt>Returns:</dt>
<dd>query result</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#query">Go to code</a><hr>

<h3 id="script()">script</h3>
<code class="signature">public abstract  boolean <strong>script</strong>(String file)</code>
<div class="details">
<p>
 run an sql script against the database.  returns a
 boolean indicating success.
</p><dl>
<dt>Parameters:</dt>
<dd>file - the script to run</dd>
<dt>Returns:</dt>
<dd>if script ran ok</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#script">Go to code</a><hr>

<h3 id="update()">update</h3>
<code class="signature">public abstract  boolean <strong>update</strong>(String sql)</code>
<div class="details">
<p>
 executes an sql statement on the database and returns a
 boolean indicating if it went well or not
</p><dl>
<dt>Parameters:</dt>
<dd>sql - the query to execute</dd>
<dt>Returns:</dt>
<dd>success</dd>
</dl>
</div>

<a href="/code/viewClass/Smutty_Database#update">Go to code</a><hr>

<div class="header">
<h1>Smutty</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../smutty/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../smutty/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../smutty/smutty_database.html" target="_top">No frames</a>
</div>
<div class="small_links">
View: <a href="/code/viewClass/Smutty_Database">Source Code</a>
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://phpdoctor.sourceforge.net/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>